<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${mascota != null} ? 'Editar Mascota' : 'A침adir Mascota'">A침adir Mascota - Petcare</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        /* Variables de color Petcare (verde) */
        :root {
            --petcare-green: #438a56;
            --petcare-green-hover: #3a7a4a;
        }

        body {
            /* Aplicar fondo verde s칩lido al cuerpo */
            background-color: var(--petcare-green);
            min-height: 100vh;
        }

        .form-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        }

        .form-floating>label {
            padding: 1rem 0.75rem;
        }

        /* Estilos para que el logo y el texto principal sean verdes */
        .text-primary {
            color: var(--petcare-green) !important;
        }

        /* Estilo para el 칤cono principal */
        .pet-icon {
            font-size: 3rem;
            color: var(--petcare-green);
            margin-bottom: 1rem;
        }

        /* Estilos para el bot칩n primario */
        .btn-primary {
            /* Fondo principal verde */
            background-color: var(--petcare-green) !important;
            border-color: var(--petcare-green) !important;
            border: none;
            border-radius: 8px;
            padding: 12px 24px;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            /* Hover verde m치s oscuro */
            background-color: var(--petcare-green-hover) !important;
            border-color: var(--petcare-green-hover) !important;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(67, 138, 86, 0.4);
            /* Sombra verde */
        }

        /* Si usas btn-outline-secondary, puedes mantenerlo, o cambiarlo a verde */
        .btn-outline-secondary {
            color: #6c757d;
            border-color: #6c757d;
        }

        .btn-outline-secondary:hover {
            color: white;
            background-color: #6c757d;
            border-color: #6c757d;
        }
    </style>
</head>

<body>
    <div th:replace="fragments/header :: navbar"></div>

    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-8 col-lg-6">
                <div class="form-container card">
                    <div class="card-body p-5">
                        <div class="text-center mb-4">
                            <i class="pet-icon fas"
                                th:classappend="${mascota != null} ? 'fa-edit' : 'fa-plus-circle'"></i>
                            <h2 class="fw-bold text-primary"
                                th:text="${mascota != null} ? 'Editar Mascota' : 'A침adir Nueva Mascota'">A침adir Nueva
                                Mascota</h2>
                            <p class="text-muted"
                                th:text="${mascota != null} ? 'Modifica los datos de la mascota' : 'Registra una nueva mascota en el sistema'">
                                Registra una nueva mascota en el sistema</p>
                        </div>

                        <form
                            th:action="${mascota != null} ? @{'/mascotas/' + ${mascota.id} + '/editar'} : @{/mascotas}"
                            method="post">
                            <div class="row g-3">
                                <div class="col-12">
                                    <div class="form-floating">
                                        <input type="text" class="form-control" id="nombre" name="nombre"
                                            placeholder="Nombre de la mascota" required
                                            th:value="${mascota != null} ? ${mascota.nombre} : ''">
                                        <label for="nombre">
                                            <i class="fas fa-tag me-2"></i>Nombre
                                        </label>
                                    </div>
                                </div>

                                <div class="col-12">
                                    <div class="form-floating">
                                        <select class="form-select" id="especie" name="especie" required>
                                            <option value="">Seleccionar especie</option>
                                            <option value="PERRO"
                                                th:selected="${mascota != null and mascota.especie=='PERRO'}">游냇 Perro
                                            </option>
                                            <option value="GATO"
                                                th:selected="${mascota != null and mascota.especie=='GATO'}">游냠 Gato
                                            </option>
                                            <option value="AVE"
                                                th:selected="${mascota != null and mascota.especie=='AVE'}">游냕 Ave
                                            </option>
                                            <option value="REPTIL"
                                                th:selected="${mascota != null and mascota.especie=='REPTIL'}">游붍 Reptil
                                            </option>
                                            <option value="PEZ"
                                                th:selected="${mascota != null and mascota.especie=='PEZ'}">游 Pez
                                            </option>
                                            <option value="OTRO"
                                                th:selected="${mascota != null and mascota.especie=='OTRO'}">游 Otro
                                            </option>
                                        </select>
                                        <label for="especie">
                                            <i class="fas fa-paw me-2"></i>Especie
                                        </label>
                                    </div>
                                </div>

                                <div class="col-12">
                                    <div class="form-floating">
                                        <input type="text" class="form-control" id="raza" name="raza"
                                            placeholder="Raza de la mascota"
                                            th:value="${mascota != null} ? ${mascota.raza} : ''">
                                        <label for="raza">
                                            <i class="fas fa-dna me-2"></i>Raza (opcional)
                                        </label>
                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <input type="date" class="form-control" id="fechaNacimiento"
                                            name="fechaNacimiento"
                                            th:value="${mascota != null and mascota.fechaNacimiento != null} ? ${mascota.fechaNacimiento} : ''">
                                        <label for="fechaNacimiento">
                                            <i class="fas fa-calendar-alt me-2"></i>Fecha de Nacimiento
                                        </label>
                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <input type="number" step="0.1" class="form-control" id="peso" name="peso"
                                            placeholder="Peso en kg"
                                            th:value="${mascota != null and mascota.peso != null} ? ${mascota.peso} : ''">
                                        <label for="peso">
                                            <i class="fas fa-weight me-2"></i>Peso (kg)
                                        </label>
                                    </div>
                                </div>

                                <div class="col-12">
                                    <div class="form-floating">
                                        <select class="form-select" id="duenoId" name="duenoId" required>
                                            <option value="">Seleccionar due침o</option>
                                            <option th:each="dueno : ${duenos}" th:value="${dueno.id}"
                                                th:text="${dueno.nombre}"
                                                th:selected="${mascota != null and mascota.dueno != null and dueno.id == mascota.dueno.id}">
                                            </option>
                                        </select>
                                        <label for="duenoId">
                                            <i class="fas fa-user me-2"></i>Due침o
                                        </label>
                                    </div>
                                </div>

                                <div class="col-12 mt-4">
                                    <button type="submit" class="btn btn-primary w-100">
                                        <i class="fas fa-save me-2"></i>Guardar Mascota
                                    </button>
                                </div>
                            </div>
                        </form>

                        <div class="text-center mt-4">
                            <a href="/admin" class="btn btn-outline-secondary">
                                <i class="fas fa-arrow-left me-2"></i>Volver a Mascotas
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div th:replace="fragments/footer :: footer"></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>